<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="ks44team04.mapper.ReviewMapper">

	<resultMap type="ReviewComment" id="reviewCommentSersultMap">
		<id     column="review_comment_list"  		property="reviewCommentList"/>
		<result column="review_list" 				property="reviewList"/>
		<result column="user_id" 					property="userId"/>
		<result column="review_comment_content" 	property="reviewCommentContent"/>
		<result column="reg_date"  					property="regDate"/>
		<result column="modify_date" 				property="modifyDate"/>
	</resultMap>
	
	<resultMap type="Review" id="reviewListResultMap">
		<id     column="review_list"  			property="reviewList"/>
		<result column="goods_list" 			property="goodsList"/>
		<result column="buyer_id" 				property="buyerId"/>
		<result column="order_detail_code" 		property="orderDetailCode"/>
		<result column="review_content"  		property="reviewContent"/>
		<result column="review_img" 			property="reviewImg"/>
		<result column="review_reg_date" 		property="reviewRegDate"/>
		<result column="review_update_date" 	property="reviewUpdateDate"/>
		<result column="save_point" 			property="savePoint"/>
		<result column="like_amount" 			property="likeAmount"/>
		<result column="grade" 					property="grade"/>
	</resultMap>
<!-- 후기 목록  -->
<select id="reviewList" resultMap="reviewListResultMap">
/* 후기 목록 검색 */
	SELECT 
		r.review_list
		,r.goods_list
		,r.buyer_id
		,r.order_detail_code
		,r.review_content
		,r.review_img
		,r.review_reg_date
		,r.review_update_date
		,r.save_point
		,r.like_amount
		,r.grade
	FROM 
		tb_review AS r 
	
</select>
<!-- 후기목록  검색 -->
<select id="reviewSerchList" resultMap="reviewListResultMap">
/* 후기 목록 검색*/
	SELECT 
		r.review_list
		,r.goods_list
		,r.buyer_id
		,r.order_detail_code
		,r.review_content
		,r.review_img
		,r.review_reg_date
		,r.review_update_date
		,r.save_point
		,r.like_amount
		,r.grade
	FROM 
		tb_review AS r 
		<trim prefix="WHERE" prefixOverrides="AND |OR ">
		   	<if test="sv != null and sv != ''">
		   		${sk} LIKE CONCAT('%',#{sv},'%')
		   	</if>
	   </trim>
	
</select>

<!-- 후기 댓글 목록 -->
<select id="reviewComment" resultMap="reviewCommentSersultMap">
/* 후기 댓글 목록 */
SELECT 
	c.review_comment_list
	,c.review_list
	,c.user_id
	,c.review_comment_content
	,c.reg_date
	,c.modify_date
FROM 
	tb_review_comment AS c
</select>



    
</mapper>