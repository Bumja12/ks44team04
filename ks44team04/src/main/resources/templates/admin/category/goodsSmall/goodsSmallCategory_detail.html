<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/adminDefault}">

	<th:block layout:fragment="customTitle">
	    <title th:text="${title}"></title>
	</th:block>
	
	<th:block layout:fragment="customContents">
		<div class="row">
			<div class="col-sm-12">
        		<div class="x_panel">
            		<div class="x_title">
               		    <h2 style="font-size: 17px;">판매 상품 카테고리 소분류 내역 (목록에서 클릭한 카테고리 소분류 PK값에 해당하는 카테고리 정보를 화면에 바인딩한다.)</h2>
                    	<div class="clearfix"></div>
            		</div>
            		<div class="x_content">
	            		<div class="row">
                    		<div class="col-sm-12">
         						<br/>
								<form id="demo-form2" data-parsley-validate class="form-horizontal form-label-left" th:action="@{/admin/category/modifyGoodsSmallCategory}" method="post">
									<!-- 카테고리 소분류 PK -->
									<div class="item form-group">
										<label class="col-form-label col-md-3 col-sm-3 label-align" for="goodsSmallCategoryPK">카테고리 소분류 PK
										</label>
										<div class="col-md-6 col-sm-6 ">
											<input type="text" name="goodsSmallCategoryPK" id="goodsSmallCategoryPK" th:value="${goodsSmall.goodsSmallCategory}" disabled="disabled" required="required" class="form-control" maxlength="15">
										</div>
									</div>
									<!-- 카테고리 대분류 FK -->
									<div class="item form-group">
										<label class="col-form-label col-md-3 col-sm-3 label-align" for="goodsLargeCategoryFK">카테고리 대분류 FK
										</label>
										<div class="col-md-6 col-sm-6 ">
											<select class="select2_single form-control" id="goodsLargeCategoryFK" disabled="disabled" name="goodsLargeCategoryFK" required="required" tabindex="-1">
												<option></option>
												<th:block th:if="${not #lists.isEmpty(goodsLargeCategoryList)}" th:each="glCategoryList : ${goodsLargeCategoryList}">
													<!-- th:selected 사용 -->
													<option th:if="${glCategoryList.goodsLargeCategory eq 'F000'}" th:value="${glCategoryList.goodsLargeCategory}" th:selected="${goodsSmall.goodsLargeCategory eq 'F000'}" th:text="${glCategoryList.goodsCategory}">과일</option> 
													<option th:if="${glCategoryList.goodsLargeCategory eq 'G000'}" th:value="${glCategoryList.goodsLargeCategory}" th:selected="${goodsSmall.goodsLargeCategory eq 'G000'}" th:text="${glCategoryList.goodsCategory}">쌀/잡곡</option>
													<option th:if="${glCategoryList.goodsLargeCategory eq 'M000'}" th:value="${glCategoryList.goodsLargeCategory}" th:selected="${goodsSmall.goodsLargeCategory eq 'M000'}" th:text="${glCategoryList.goodsCategory}">버섯</option>
													<option th:if="${glCategoryList.goodsLargeCategory eq 'UF00'}" th:value="${glCategoryList.goodsLargeCategory}" th:selected="${goodsSmall.goodsLargeCategory eq 'UF00'}" th:text="${glCategoryList.goodsCategory}">못난이과일</option>
													<option th:if="${glCategoryList.goodsLargeCategory eq 'UV00'}" th:value="${glCategoryList.goodsLargeCategory}" th:selected="${goodsSmall.goodsLargeCategory eq 'UV00'}" th:text="${glCategoryList.goodsCategory}">못난이채소</option>
													<option th:if="${glCategoryList.goodsLargeCategory eq 'V000'}" th:value="${glCategoryList.goodsLargeCategory}" th:selected="${goodsSmall.goodsLargeCategory eq 'V000'}" th:text="${glCategoryList.goodsCategory}">채소</option>
													<option th:if="${glCategoryList.goodsLargeCategory eq 'Z000'}" th:value="${glCategoryList.goodsLargeCategory}" th:selected="${goodsSmall.goodsLargeCategory eq 'Z000'}" th:text="${glCategoryList.goodsCategory}">기타</option>
												</th:block>	
											</select>
										</div>
									</div>
									<!-- 판매 상품 소분류 -->
									<div class="item form-group">
										<label class="col-form-label col-md-3 col-sm-3 label-align" for="smallCategoryName">판매 상품 소분류
										</label>
										<div class="col-md-6 col-sm-6 ">
											<input type="text" name="smallCategoryName" id="smallCategoryName" th:value="${goodsSmall.smallCategoryName}" disabled="disabled" required="required" class="form-control" maxlength="15">
										</div>
									</div>
									<!-- 회원 아이디(작성자) -->
									<div class="item form-group">
										<label class="col-form-label col-md-3 col-sm-3 label-align" for="regId">회원 아이디(작성자)
										</label>
										<div class="col-md-6 col-sm-6 ">
											<input type="text" name="regId" id="regId" th:value="${goodsSmall.regId}" disabled="disabled" required="required" class="form-control" maxlength="15">
										</div>
									</div>
									<!-- 등록일 -->
									<div class="item form-group">
										<label class="col-form-label col-md-3 col-sm-3 label-align" for="regDate">등록일
										</label>
										<div class="col-md-6 col-sm-6 ">
											<input type="datetime" name="regDate" id="regDate" th:value="${goodsSmall.regDate}" disabled="disabled" required="required" class="form-control" maxlength="15">
										</div>
									</div>
									<!-- 사용 여부 -->
									<div class="item form-group">
										<label class="col-form-label col-md-3 col-sm-3 label-align">사용 여부
										</label>
										<div class="col-md-6 col-sm-6 ">
											<input type="radio" class="flat" name="useCheck" id="useCheckY" th:checked="${goodsSmall.useCheck eq 'Y'}" checked="checked" required="required" disabled="disabled"/> Y
											<input type="radio" class="flat" name="useCheck" id="useCheckN" th:checked="${goodsSmall.useCheck eq 'N'}" value="N" required="required" disabled="disabled"/> N
										</div>
									</div>
									<div class="ln_solid"></div>
									<div class="item form-group">
										<div class="col-md-6 col-sm-6 offset-md-3">
											<button type="button" id="modifyBtn" class="btn btn-primary">수정</button>
											<button class="btn btn-success" type="reset">초기화</button>
											<button id="cancelBtn" class="btn btn-warning" type="button">목록</button>
										</div>
									</div>
									<div class="ln_solid"></div>
									<ul style="padding-left: 0;">
										<li style="list-style: none; padding-left: 10px;">1. 수정 버튼 클릭하면 비활성 상태인 요소가 활성화되면서 수정이 가능하다.</li>
										<li style="list-style: none; padding-left: 10px;">2. 초기화 버튼 클릭하면 수정했던 내용이 초기화된다.</li>
										<li style="list-style: none; padding-left: 10px;">3. 목록 버튼 클릭하면 목록으로 이동한다.</li>
									</ul>									
								</form> <!-- <form id="demo-form2" data-parsley-validate class="form-horizontal form-label-left"> -->
           					</div> <!-- </div class="col-sm-12"> -->
           				</div> <!-- </div class="row"> -->
           				
           			</div> <!-- </div class="x_content"> -->
            	</div> <!-- </div class="x_panel"> -->
            
			</div> <!-- </div class="col-md-12 col-sm-12"> -->
		</div> <!-- </div class="row"> -->
	
	</th:block>

	<th:block layout:fragment="customJsScript">
		<script type="text/javascript">
			function handleOnInput(el, maxlength) {
			  if(el.value.length > maxlength)  {
			    el.value 
			      = el.value.substr(0, maxlength);
			  }
			}
			
			// 수정 버튼 탐색
			let modifyBtn = document.querySelector('#modifyBtn');
			// 수정할 요소 탐색
 			let updateContent = document.querySelectorAll('#goodsLargeCategoryFK ,#smallCategoryName, #useCheckY, #useCheckN');
			
			// 수정 버튼에 이벤트 등록
			modifyBtn.addEventListener('click', function(){
				for(var i=0; i<updateContent.length; i++){
					// 수정할 요소가 disabled 상태라면 원래대로 바꾼다. 
					if(updateContent[i].disabled){
						updateContent[i].disabled = false;
					}
				}
				// 그리고 수정 버튼을 전송 버튼으로 바꾼다.
				modifyBtn.addEventListener('click', function(){
					let disabledContent =  $('input[disabled]');
					disabledContent.each(function(i){
						// console.log($(this)[0].disabled);
						$(this)[0].disabled=false;
					});
					this.type = 'submit';
				});
			});
			
			// 목록 버튼 탐색
			let cancelBtn = document.querySelector('#cancelBtn');
			
			// 목록 버튼에 이벤트 등록
			cancelBtn.addEventListener('click', function(){
				console.log(location.href);
				// 판매 상품 카테고리 소분류 목록으로 리다이렉트
				window.location = '/admin/category/goodsSmall';
			
			});
			
			$(function(){
				// 초기화 버튼 탐색
				let $cancleBtn =  $('button:reset');
				// 체크가 되있는 상태인 라디오 버튼 탐색
				let $radioBtn =  $('input[checked*=checked]');
				console.log($radioBtn.prop('id'));
				console.log($cancleBtn);
				$cancleBtn.click(function(){
					// 모든 라디오 버튼 탐색
					let $radioBtn =  $('input:radio');
					$radioBtn.each(function(i){
						console.log($(this).prop('id'));
// 						if($(this).prop('id') != $radioBtn){
// 							console.log('다르다');
// 						}else{
// 							console.log('같다.');
// 						}
					});
				});
			});
		</script>
	</th:block>

</html>
