<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layout/adminDefault}">

<th:block layout:fragment="customTitle">
	<title th:text="${title}"></title>
</th:block>

<th:block layout:fragment="customTopJs">
	<script src="http://code.jquery.com/jquery-latest.min.js"></script>
	<script>
	$(function() {
		$(function (){
			$(".qnaToggle").click(function (){
		  	//$(".toggle").toggle();
		  		$(this).next().next().toggle();
			});
		});
	});
	</script>
</th:block> 

<th:block layout:fragment="customContents">
	<div class="page-title">
		<div class="title_left">
			<h3>상품 문의</h3>
		</div>
	</div>

	<div class="col-md-12 col-sm-12 col-xs-12">
		<div class="x_panel">
			<div class="x_title">
				<h5>
					검색 필터 <a class="collapse-link"><i class="fa fa-chevron-up"
						style="color: #b4b7ba;"></i></a>
				</h5>
				<div class="clearfix"></div>
			</div>

			<div class="x_content">
				<div class="well" style="overflow: auto">
					<form th:action="@{/admin/goods/goodsQna}" method="post">
						<div class="form-inline form-group" style="margin-bottom: -1px;">
							<label class="control-label" for="qnaSearch" style="margin-right: 10px;">문의 검색</label>
								<select class="form-control" name="searchKey">
									<option value="">::</option>
									<option value="goodsCode">상품코드</option>
									<option value="goodsName">상품명</option>
									<option value="categoryName">카테고리</option>
									<option value="goodsQnaContent">문의내용</option>
									<option value="userId">작성자ID</option>
								</select>
									<input type="text"name="value" class="form-control" size="12">
							<label class="control-label" for="qnaSearch" style="margin-left: 10px; margin-right: 10px;">답변 상태</label>
								<select class="form-control">
									<option value="">::</option>
									<option value="1">답변대기</option>
									<option value="2">답변완료</option>
								</select>
						</div>
						<div class="form-inline control-group controls">
							<label class="control-label" for="qnaSearchDate" style="margin-right: 26px;">등록일</label>
							<div class="input-prepend input-group" style="margin-top:9px;">
								<span class="add-on input-group-addon"><i class="glyphicon glyphicon-calendar fa fa-calendar"></i></span>
									<input type="text" style="width: 200px;" name="reservation" id="reservation" class="form-control" value="01/01/2016 - 01/25/2016" />
							</div>
							<div class="btn-group  btn-group-sm">
		                        <button class="btn btn-default" type="button" name="filterDate" value="today">오늘</button>
		                        <button class="btn btn-default" type="button" name="filterDate" value="week">일주일</button>
		                        <button class="btn btn-default" type="button" name="filterDate" value="month">한달</button>
	                      </div>
						</div>
						<div style="text-align: center; margin-bottom:-10px;">
							<button type="submit" class="btn btn-dark">검색</button>
							<button type="reset" class="btn btn-dark">초기화</button>
						</div>
					</form>
				</div>
			</div>

			<div class="x_content2">
				<table id="datatable"
					class="table table-striped table-bordered bulk_action dataTable no-footer"
					role="grid">
						<thead>
							<tr>
								<th style="width:20px;">No</th>
								<th style="width:70px;">카테고리</th>
								<th style="width:70px;">상품코드</th>
								<th style="width:120px;">상품명</th>
								<th>문의내용</th>
								<th style="width:60px;">비밀글</th>
								<th style="width:70px;">비밀번호</th>
								<th style="width:60px;">작성자</th>
								<th style="width:140px;">작성일</th>
								<th style="width:70px;">답변상태</th>
								<th style="width:110px;">관리</th>
							</tr>
						</thead>
						<tbody>
							<tr th:if="${not #lists.isEmpty(goodsQna)}" th:each="q : ${goodsQna}" id="goodsQnaTable">
								<td th:text="${q.goodsQnaNum}" style="text-align: center;"></td>
								<td th:text="${q.goodsQnaCategoryInfo.categoryName}" style="text-align: center;"></td>
								<td th:text="${q.goodsInfo.goodsCode}"></td>
								<td th:text="${q.goodsInfo.goodsName}"></td>
								<td><b>[[${q.goodsQnaTitle}]]</b>&nbsp;&nbsp;&nbsp;[[${q.goodsQnaContent}]]
								<a href="javascript:void(0);" class="qnaToggle badge" style="color: gray; background-color:#ECECEC; font-weight: bold; float:right;">답변보기</a>
								<br>
								<table class="table table-striped table-bordered toggle" style="display:none; margin-top:20px; width: 100%;">
									<thead>
									 	<tr>
											<th>작성자</th>
											<th>답변내용</th>
											<th>등록일</th>
										</tr>
									</thead>
									<tbody>
										<tr th:if="${q.qnaStatus} == '답변완료'">
											<td th:text="${q.goodsAnswerInfo.sellerId}"></td>
											<td th:text="${q.goodsAnswerInfo.goodsAnswerContent}"></td>
											<td th:text="${q.goodsAnswerInfo.answerDate}"></td>
										</tr>
										<tr th:unless="${q.qnaStatus} == '답변완료'">
											<td colspan="3">등록된 답변이 없습니다.</td>
										</tr>
									</tbody>
								</table>
								</td>
								<td th:text="${q.secretCheck}"></td>
								<td th:text="${q.goodsQnaPw}"></td>
								<td th:text="${q.userInfo.userId}"></td>
								<td th:text="${q.goodsQnaDate}"></td>
								<td th:text="${q.qnaStatus}"></td>
								<td style="text-align: center;">
									<a href="#"><i class="fa fa-edit"></i> 수정</a>
									<a href="#"><i class="fa fa-close"></i> 삭제</a>
								</td>
							</tr>
							<tr th:unless="${not #lists.isEmpty(goodsQna)}">
								<td colspan="11">등록된  문의가 없습니다.</td>
							</tr>
						</tbody>
					</table>
				</div>
			</div>
		</div>
</th:block>

</html>
