<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layout/adminDefault}">

<th:block layout:fragment="customCss">
	<style>
th {
	text-align: center;
}

.table > tbody > tr > td {
	vertical-align: middle;
	text-align: center;
}
</style>
</th:block>

<th:block layout:fragment="customTitle">
	<title th:text="${title}"></title>
</th:block>

<th:block layout:fragment="customContents">
	<div class="col-md-12 col-sm-12 col-xs-12" style="overflow: scroll; width:100%; height:700px;">
		<div class="x_panel">
			<div class="x_title">
				<h2>전체회원 포인트조회 <small>Admin</small></h2>
				<ul class="nav navbar-right panel_toolbox">
					<li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
					</li>
					<li class="dropdown"><a href="#" class="dropdown-toggle"
						data-toggle="dropdown" role="button" aria-expanded="false"><i
							class="fa fa-wrench"></i></a>
						<div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
							<a class="dropdown-item" href="#">Settings 1</a> <a
								class="dropdown-item" href="#">Settings 2</a>
						</div></li>
					<li><a class="close-link"><i class="fa fa-close"></i></a></li>
				</ul>
				<div class="clearfix"></div>
			</div>	
			<div class="x_content2">
				<div class="x_panel">
					<div th:replace="fragments/couponListSearch :: couponListSearchFragment"></div>
					<table id="datatable-checkbox" class="table table-striped table-bordered table-hover dataTable no-footer" role="grid">
						<thead>
						<tr>
							<th style="width: 30px;">
								<input type="checkbox" class="form-check-input motherCheck">
							</th>
							<th>회원아이디</th>
							<th>이름</th>
							<th>닉네임</th>
							<th>권한</th>
							<th>등급</th>
							<!-- <th>연락처</th>
                            <th>이메일</th> -->
							<th>가입일</th>
							<th>최근접속일</th>
							<th>상태</th>
							<th>관리</th>
							<th style="display: none"><input type="text" name="adminId" th:value="${session.SID}"></th>
							<th style="display: none"><input type="text" id="couponCode" name="couponCode"></th>
						</tr>
						</thead>
						<tbody>
						<tr th:if="${not #lists.isEmpty(userList)}" th:each="l : ${userList}">
							<td><input type="checkbox" class="childCheck"></td>
							<td th:text="${l.userId}"></td>
							<td th:text="${l.userName}"></td>
							<td th:text="${l.userNickname}"></td>
							<td th:text="${l.rightList.rightStatus}"></td>
							<td th:text="${l.userLevelName}"></td>
							<!-- <td th:text="${l.userPhone}"></td>
							<td th:text="${l.userEmail}"></td> -->
							<td th:text="${l.userRegDate}"></td>
							<td th:text="${l.userUpdateDate}"></td>
							<td th:text="${l.userStatus}" th:value="${l.userStatus}" id="userStatus"></td>
							<td>
								<button class="btn btn-info sendPointBtn" type="button">포인트 지급</button>
							</td>
						</tr>
						<tr th:unless="${not #lists.isEmpty(userList)}">
							<td colspan="14" style="text-align: center;">등록된 회원이 없습니다.</td>
						</tr>
						</tbody>
					</table>
				</div>		
			</div>
		</div>
	</div>
	
	<div class="modal fade" id="couponCreate" tabindex="-1" role="dialog" aria-labelledby="searchPaymentDetail" aria-hidden="true">
	  <div class="modal-dialog modal-lg" role="document">
	    <div class="modal-content">
	      <div class="modal-header">
	        <h2 class="modal-title" id="couponCreateTitle">쿠폰생성</h2>
	        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
	          <span aria-hidden="true">&times;</span>
	        </button>
	      </div>
	      <div class="modal-body">
			<div class="x_panel">
				<form method="post" th:action="@{/admin/coupon/couponCreate}">
			        <table id="datatable-responsive" class="table table-striped table-bordered dt-responsive nowrap" cellspacing="0" width="100%">
						<thead>
							<tr>
								<th>쿠폰명</th>
								<th>할인금액</th>
								<th>사용조건금액(이상)</th>
								<th>만료일자</th>
								<th>등록자</th>
							</tr>
						</thead>
						<tbody>
								<tr>
									<td><input name="couponName" class="couponInfo" type="text" style="padding: 4px"></td>
									<td><input name="discountPrice" class="couponInfo" type="number" style="padding: 4px" placeholder="숫자만 입력해주세요."></td>
									<td><input name="priceTerms" class="couponInfo" type="number" style="padding: 4px" placeholder="숫자만 입력해주세요."></td>
									<td><input name="endDate" class="form-control couponInfo" type="datetime-local" style="padding: 4px"></td>
									<td><input name="regId" class="form-control" type="text" style="padding: 4px; text-align: center" th:value="${session.SID}" readonly="readonly"></td>
								</tr>
						</tbody>
					</table>
			<div class="text-center">
	        	<button type="submit" class="btn btn-success float-middle createBtn">생성</button>
	        	<button type="button" class="btn btn-warning float-middle resetBtn">초기화</button>
	      	</div>
				</form>
			</div>
	      </div>
	      <div class="modal-footer">
	        <button type="button" class="btn btn-primary closeModal" data-dismiss="modal">Close</button>
	      </div>
	    </div>
	  </div>
	</div>

	<div class="modal fade" id="couponIssue" tabindex="-1" role="dialog" aria-labelledby="searchPaymentDetail" aria-hidden="true">
		<div class="modal-dialog modal-lg" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<h2 class="modal-title" id="couponIssueTitle">쿠폰발급하기</h2>
					<button type="button" class="close" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
				</div>
				<div class="modal-body">
					<div class="x_panel">
						<form th:action="@{/admin/coupon/couponIssue}" method="post" >
							<table id="datatable-checkbox" class="table table-striped table-bordered table-hover dataTable no-footer" role="grid">
								<thead>
								<tr>
									<th style="width: 30px;">
										<input type="checkbox" class="form-check-input motherCheckUser">
									</th>
									<th>회원아이디</th>
									<th>이름</th>
									<th>닉네임</th>
									<th>권한</th>
									<th>등급</th>
									<!-- <th>연락처</th>
                                    <th>이메일</th> -->
									<th>가입일</th>
									<th>최근접속일</th>
									<th>상태</th>
									<th>관리</th>
									<th style="display: none"><input type="text" name="adminId" th:value="${session.SID}"></th>
									<th style="display: none"><input type="text" id="couponCode" name="couponCode"></th>
								</tr>
								</thead>
								<tbody class="userList">
								</tbody>
							</table>
							<div class="text-center">
								<button type="submit" class="btn btn-success float-middle couponIssueBtn">쿠폰발급</button>
								<button type="button" class="btn btn-warning float-middle resetBtn">초기화</button>
							</div>
						</form>
					</div>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-primary closeModal" data-dismiss="modal">Close</button>
				</div>
			</div>
		</div>
	</div>

	<div class="pwCheckModal modal fade" id="pwCheckModal" tabindex="-1" role="dialog" aria-labelledby="pwCheckModalLabel" aria-hidden="true">
		<div class="modal-dialog modal-sm" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<h4 class="modal-title" id="pwCheckModalTitle" style="font-weight: bold; text-align: center;">관리자확인</h4>
				</div>
				<div class="modal-body">
					<div class="form-group">
						<label for="adminPw" class="col-form-label">비밀번호를 입력해주세요.</label>
						<input type="password" class="pwInput form-control" id="adminPw" name="adminPw">
					</div>
				</div>
				<div class="modal-footer" style="text-align: center;">
					<button type="button" class="btn btn-dark" id="adminCheckBtn">확인</button>
					<button type="button" class="btn btn-secondary" id='closeBtn' data-dismiss="modal">닫기</button>
				</div>
			</div>
		</div>
	</div>

</th:block>

<th:block layout:fragment="customJsScript">
	<script type="text/javascript">
	</script>
</th:block>

</html>