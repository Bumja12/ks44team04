<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="ks44team04.mapper.RegularAskMapper">
	<!-- 자주 묻는 질문 목록 -->
	<resultMap type="RegularAsk" id="regularAskMap">
		<id	column="regular_ask" 			 property="regularAskPK"/> 		 <!-- 자주 묻는 질문 PK -->
        <result column="category_name"		 property="categoryName"/>		 <!-- 자주 묻는 질문 카테고리 -->
        <result column="reg_id" 			 property="regId"/>				 <!-- 회원 아이디 FK(작성자) -->
        <result column="regular_ask_title"   property="regularAskTitle"/>	 <!-- 제목 -->
        <result column="regular_ask_content" property="regularAskContent"/>	 <!-- 내용 -->
        <result column="use_check" 			 property="useCheck"/>			 <!-- 사용 여부 -->
        <result column="reg_date" 		     property="regDate"/>			 <!-- 등록일 -->
        <result column="update_date"         property="updateDate"/>		 <!-- 수정일 -->
	</resultMap>
	
	<!-- 자주 묻는 질문 목록 조회 -->
    <select id="getRegularAskList" resultMap="regularAskMap">
    	SELECT 
			 rAsk.regular_ask 
			,rAskCate.category_name 
			,rAsk.reg_id 
			,rAsk.regular_ask_title
			,rAsk.regular_ask_content
			,rAsk.use_check
			,rAsk.reg_date
			,rAsk.update_date
		FROM 
			tb_regular_ask AS rAsk 			    -- 자주 묻는 질문 테이블
			INNER JOIN 
			tb_regular_ask_category AS rAskCate -- 자주 묻는 질문 카테고리 테이블
			ON rAsk.regular_ask_category = rAskCate.regular_ask_category;
    </select>
    
    <!-- 특정 자주 묻는 질문 조회 -->
    <select id="getRegularAskByPK" parameterType="String" resultType="RegularAsk">
	    SELECT 
			 rAsk.regular_ask         AS regularAskPK 	   -- 자주 묻는 질문 PK
	    	,rAskCate.category_name   AS categoryName      -- 자주 묻는 질문 카테고리
			,rAsk.reg_id 			  AS regId 			   -- 회원 아이디 FK(작성자)
			,rAsk.regular_ask_title   AS regularAskTitle   -- 제목
			,rAsk.regular_ask_content AS regularAskContent -- 내용
			,rAsk.use_check 		  AS useCheck 		   -- 사용 여부
			,rAsk.reg_date 			  AS regDate 		   -- 등록일
			,rAsk.update_date 		  AS updateDate 	   -- 수정일
		FROM 
			tb_regular_ask AS rAsk 			    -- 자주 묻는 질문 테이블
			INNER JOIN 
			tb_regular_ask_category AS rAskCate -- 자주 묻는 질문 카테고리 테이블
			ON rAsk.regular_ask_category = rAskCate.regular_ask_category
		WHERE 
			regular_ask = #{regularAskPK}; 		-- 자주 묻는 질문 PK값을 매개변수로 입력 받는다.
    </select>
    
</mapper>

